

import { addScriptHook, W3TS_HOOK } from "@zerozeroeight/w3ts";

//===========================================================================
// Trigger: Mass Link
//===========================================================================
const Trig_Mass_Link_Func003Func001Func002Func001002003 = (): boolean => {

	return ( IsUnitType( GetFilterUnit(), UNIT_TYPE_ANCIENT ) === true );

};


const Trig_Mass_Link_Func003Func001Func002Func002Func002Func009C = (): boolean => {


	if ( ( ! ( udg_Jump[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func002Func024C = (): boolean => {


	if ( ( ! ( udg_Lightning[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func002Func009C = (): boolean => {


	if ( ( ! ( udg_Jump[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func002Func024C = (): boolean => {


	if ( ( ! ( udg_Lightning[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func009C = (): boolean => {


	if ( ( ! ( udg_Jump[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func014Func001C = (): boolean => {


	if ( ( ! ( UnitHasItemOfTypeBJ( GetEnumUnit(), FourCC( "I00N" ) ) === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func014C = (): boolean => {


	if ( ( ! ( UnitHasItemOfTypeBJ( GetEnumUnit(), FourCC( "I00M" ) ) === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func024C = (): boolean => {


	if ( ( ! ( udg_Lightning[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func005Func009C = (): boolean => {


	if ( ( ! ( udg_Jump[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func005Func024C = (): boolean => {


	if ( ( ! ( udg_Lightning[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func009C = (): boolean => {


	if ( ( ! ( udg_Jump[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func014Func001C = (): boolean => {


	if ( ( ! ( UnitHasItemOfTypeBJ( GetEnumUnit(), FourCC( "I00N" ) ) === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func014C = (): boolean => {


	if ( ( ! ( UnitHasItemOfTypeBJ( GetEnumUnit(), FourCC( "I00M" ) ) === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func024C = (): boolean => {


	if ( ( ! ( udg_Lightning[ udg_Index ] === true ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func007Func001C = (): boolean => {


	if ( ( ! ( UnitHasItemOfTypeBJ( GetEnumUnit(), FourCC( "I01N" ) ) === true ) ) ) {

		return false;

	}


	if ( ( ! ( GetRandomInt( 1, 100 ) <= 20 ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func007Func002C = (): boolean => {


	if ( ( ! ( UnitHasItemOfTypeBJ( GetEnumUnit(), FourCC( "I00M" ) ) === true ) ) ) {

		return false;

	}


	if ( ( ! ( GetRandomInt( 1, 100 ) <= 30 ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func007Func003C = (): boolean => {


	if ( ( ! ( UnitHasItemOfTypeBJ( GetEnumUnit(), FourCC( "I00N" ) ) === true ) ) ) {

		return false;

	}


	if ( ( ! ( GetRandomInt( 1, 100 ) <= 40 ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007Func007C = (): boolean => {


	if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func007Func001C() ) ) {

		return true;

	}


	if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func007Func002C() ) ) {

		return true;

	}


	if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func007Func003C() ) ) {

		return true;

	}

	return false;

};


const Trig_Mass_Link_Func003Func001Func002Func002Func007C = (): boolean => {


	if ( ( ! Trig_Mass_Link_Func003Func001Func002Func002Func007Func007C() ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002Func002C = (): boolean => {


	if ( ( ! ( CountUnitsInGroup( udg_TempGroup2 ) > 0 ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001Func002C = (): boolean => {


	if ( ( ! ( GetUnitStateSwap( UNIT_STATE_MANA, GetEnumUnit() ) >= 100 ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003Func001C = (): boolean => {


	if ( ( ! ( GetOwningPlayer( GetEnumUnit() ) !== Player( PLAYER_NEUTRAL_AGGRESSIVE ) ) ) ) {

		return false;

	}

	return true;

};


const Trig_Mass_Link_Func003A = (): void => {


	if ( ( Trig_Mass_Link_Func003Func001C() ) ) {

		udg_TempPoint = GetUnitLoc( GetEnumUnit() );

		if ( ( Trig_Mass_Link_Func003Func001Func002C() ) ) {

			udg_TempGroup2 = GetUnitsInRangeOfLocMatching( 2000, udg_TempPoint, Condition( Trig_Mass_Link_Func003Func001Func002Func001002003 ) );

			if ( ( Trig_Mass_Link_Func003Func001Func002Func002C() ) ) {

				IssueImmediateOrderBJ( GetEnumUnit(), "stop" )
				SetUnitManaBJ( GetEnumUnit(), ( GetUnitStateSwap( UNIT_STATE_MANA, GetEnumUnit() ) - 100 ) )
				AddSpecialEffectLocBJ( udg_TempPoint, "Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl" )
				DestroyEffectBJ( GetLastCreatedEffectBJ() )

				if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007C() ) ) {

					udg_TempPoint2 = GetUnitLoc( GroupPickRandomUnit( udg_TempGroup2 ) );
					bj_forLoopAIndex = 1;
					bj_forLoopAIndexEnd = 7;

					while ( true ) {

						if ( bj_forLoopAIndex > bj_forLoopAIndexEnd ) break;
						TriggerExecute( gg_trg_Reset )
						udg_StartPoint[ udg_Index ] = OffsetLocation( udg_TempPoint, 1, 1 );
						udg_Angle[ udg_Index ] = ( AngleBetweenPoints( udg_StartPoint[ udg_Index ], udg_TempPoint2 ) + ( - 20 + ( I2R( GetForLoopIndexA() ) * 5 ) ) );
						CreateNUnitsAtLoc( 1, FourCC( "h008" ), Player( PLAYER_NEUTRAL_AGGRESSIVE ), udg_StartPoint[ udg_Index ], udg_Angle[ udg_Index ] )
						UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetLastCreatedUnit() )
						udg_Missile[ udg_Index ] = GetLastCreatedUnit();
						udg_DamageSource[ udg_Index ] = GetEnumUnit();
						udg_Jump[ udg_Index ] = false;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func002Func009C() ) ) {

							UnitAddAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )
							UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )

						} else {

						null

						}

						udg_Teleportation[ udg_Index ] = 0;
						udg_Distance[ udg_Index ] = ( DistanceBetweenPoints( udg_StartPoint[ udg_Index ], udg_TempPoint2 ) + GetRandomReal( - 100, 100 ) );
						udg_AttackType[ udg_Index ] = ATTACK_TYPE_CHAOS;
						udg_DamageMethod[ udg_Index ] = 1;
						udg_ExplodeRadius[ udg_Index ] = 120;
						udg_DamageSpecialEffect[ udg_Index ] = "";
						udg_DamageSpecialEffectLocation[ udg_LoopIndex ] = "origin";
						udg_CollisionRadius[ udg_Index ] = 85;
						udg_Damage[ udg_Index ] = 0;
						udg_Targets[ udg_Index ] = 1;
						udg_TargetsAdvanced[ udg_Index ] = 1;
						udg_Drag[ udg_Index ] = false;
						udg_Link[ udg_Index ] = true;
						udg_Lightning[ udg_Index ] = true;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func002Func024C() ) ) {

							AddLightningLoc( "DRAL", udg_StartPoint[ udg_Index ], udg_StartPoint[ udg_Index ] )
							udg_LightningEffect[ udg_Index ] = GetLastCreatedLightningBJ();

						} else {

						null

						}

						udg_Speed[ udg_Index ] = 1400;
						udg_VerticalArc[ udg_Index ] = 0;
						udg_HorizontalArc[ udg_Index ] = ( - 600 + ( 150 * I2R( GetForLoopIndexA() ) ) );
						udg_Speed[ udg_Index ] = ( udg_Speed[ udg_Index ] - RAbsBJ( udg_HorizontalArc[ udg_Index ] ) );
						udg_Speed[ udg_Index ] = ( udg_Speed[ udg_Index ] * 0.03 );
						udg_MissileEffectString[ udg_Index ] = "Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilMissile.mdl";
						AddSpecialEffectTargetUnitBJ( "chest", GetLastCreatedUnit(), udg_MissileEffectString[ udg_Index ] )
						udg_MissileEffect[ udg_Index ] = GetLastCreatedEffectBJ();
						udg_MissileSize[ udg_Index ] = 100;
						SetUnitScalePercent( GetLastCreatedUnit(), udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ] )
						SetUnitVertexColorBJ( GetLastCreatedUnit(), 100, 100, 100, 0 )
						udg_TerrainReaction[ udg_Index ] = 0;
						udg_TreeReaction[ udg_Index ] = 2;
						udg_BoundaryReaction[ udg_Index ] = 2;
						udg_BuildingReaction[ udg_Index ] = 1;
						bj_forLoopAIndex = bj_forLoopAIndex + 1;

					}


					bj_forLoopAIndex = 1;
					bj_forLoopAIndexEnd = 7;

					while ( true ) {

						if ( bj_forLoopAIndex > bj_forLoopAIndexEnd ) break;
						TriggerExecute( gg_trg_Reset )
						udg_StartPoint[ udg_Index ] = OffsetLocation( udg_TempPoint, 1, 1 );
						udg_Angle[ udg_Index ] = ( AngleBetweenPoints( udg_StartPoint[ udg_Index ], udg_TempPoint2 ) + ( - 20 + ( I2R( GetForLoopIndexA() ) * 5 ) ) );
						CreateNUnitsAtLoc( 1, FourCC( "h008" ), Player( PLAYER_NEUTRAL_AGGRESSIVE ), udg_StartPoint[ udg_Index ], udg_Angle[ udg_Index ] )
						UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetLastCreatedUnit() )
						udg_Missile[ udg_Index ] = GetLastCreatedUnit();
						udg_DamageSource[ udg_Index ] = GetEnumUnit();
						udg_Jump[ udg_Index ] = false;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func009C() ) ) {

							UnitAddAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )
							UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )

						} else {

						null

						}

						udg_Teleportation[ udg_Index ] = 0;
						udg_Distance[ udg_Index ] = 1000;
						udg_AttackType[ udg_Index ] = ATTACK_TYPE_CHAOS;
						udg_DamageMethod[ udg_Index ] = 1;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func014C() ) ) {

							udg_ExplodeRadius[ udg_Index ] = 175;

						} else {


							if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func014Func001C() ) ) {

								udg_ExplodeRadius[ udg_Index ] = 225;

							} else {

								udg_ExplodeRadius[ udg_Index ] = 125;

							}


						}

						udg_DamageSpecialEffect[ udg_Index ] = "";
						udg_DamageSpecialEffectLocation[ udg_LoopIndex ] = "origin";
						udg_CollisionRadius[ udg_Index ] = 85;
						udg_Damage[ udg_Index ] = 500;
						udg_Targets[ udg_Index ] = 1;
						udg_TargetsAdvanced[ udg_Index ] = 2;
						udg_Drag[ udg_Index ] = false;
						udg_Link[ udg_Index ] = false;
						udg_Lightning[ udg_Index ] = false;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func003Func024C() ) ) {

							AddLightningLoc( "DRAL", udg_StartPoint[ udg_Index ], udg_StartPoint[ udg_Index ] )
							udg_LightningEffect[ udg_Index ] = GetLastCreatedLightningBJ();

						} else {

						null

						}

						udg_Speed[ udg_Index ] = 1400;
						udg_VerticalArc[ udg_Index ] = 0;
						udg_HorizontalArc[ udg_Index ] = ( - 360 + ( 90 * I2R( GetForLoopIndexA() ) ) );
						udg_Speed[ udg_Index ] = ( udg_Speed[ udg_Index ] - RAbsBJ( udg_HorizontalArc[ udg_Index ] ) );
						udg_Speed[ udg_Index ] = ( udg_Speed[ udg_Index ] * 0.03 );
						udg_MissileEffectString[ udg_Index ] = "UI\\Menu\\UI_Human_AllyBack\\UI_Human_AllyBack.mdl";
						AddSpecialEffectTargetUnitBJ( "chest", GetLastCreatedUnit(), udg_MissileEffectString[ udg_Index ] )
						udg_MissileEffect[ udg_Index ] = GetLastCreatedEffectBJ();
						udg_MissileSize[ udg_Index ] = 100;
						SetUnitScalePercent( GetLastCreatedUnit(), udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ] )
						SetUnitVertexColorBJ( GetLastCreatedUnit(), 100, 100, 100, 0 )
						udg_TerrainReaction[ udg_Index ] = 0;
						udg_TreeReaction[ udg_Index ] = 2;
						udg_BoundaryReaction[ udg_Index ] = 2;
						udg_BuildingReaction[ udg_Index ] = 1;
						bj_forLoopAIndex = bj_forLoopAIndex + 1;

					}


					RemoveLocation( udg_TempPoint2 )

				} else {

					bj_forLoopAIndex = 1;
					bj_forLoopAIndexEnd = 7;

					while ( true ) {

						if ( bj_forLoopAIndex > bj_forLoopAIndexEnd ) break;
						TriggerExecute( gg_trg_Reset )
						udg_StartPoint[ udg_Index ] = OffsetLocation( udg_TempPoint, 1, 1 );
						udg_Angle[ udg_Index ] = ( GetUnitFacing( GetEnumUnit() ) + I2R( ( GetForLoopIndexA() * 52 ) ) );
						CreateNUnitsAtLoc( 1, FourCC( "h008" ), Player( PLAYER_NEUTRAL_AGGRESSIVE ), udg_StartPoint[ udg_Index ], udg_Angle[ udg_Index ] )
						UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetLastCreatedUnit() )
						udg_Missile[ udg_Index ] = GetLastCreatedUnit();
						udg_DamageSource[ udg_Index ] = GetEnumUnit();
						udg_Jump[ udg_Index ] = false;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func005Func009C() ) ) {

							UnitAddAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )
							UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )

						} else {

						null

						}

						udg_Teleportation[ udg_Index ] = 0;
						udg_Distance[ udg_Index ] = 1000;
						udg_AttackType[ udg_Index ] = ATTACK_TYPE_CHAOS;
						udg_DamageMethod[ udg_Index ] = 1;
						udg_ExplodeRadius[ udg_Index ] = 120;
						udg_DamageSpecialEffect[ udg_Index ] = "";
						udg_DamageSpecialEffectLocation[ udg_LoopIndex ] = "origin";
						udg_CollisionRadius[ udg_Index ] = 85;
						udg_Damage[ udg_Index ] = 0;
						udg_Targets[ udg_Index ] = 1;
						udg_TargetsAdvanced[ udg_Index ] = 1;
						udg_Drag[ udg_Index ] = false;
						udg_Link[ udg_Index ] = true;
						udg_Lightning[ udg_Index ] = true;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func005Func024C() ) ) {

							AddLightningLoc( "DRAL", udg_StartPoint[ udg_Index ], udg_StartPoint[ udg_Index ] )
							udg_LightningEffect[ udg_Index ] = GetLastCreatedLightningBJ();

						} else {

						null

						}

						udg_Speed[ udg_Index ] = 1400;
						udg_Speed[ udg_Index ] = ( udg_Speed[ udg_Index ] * 0.03 );
						udg_VerticalArc[ udg_Index ] = 0;
						udg_HorizontalArc[ udg_Index ] = 0;
						udg_MissileEffectString[ udg_Index ] = "Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilMissile.mdl";
						AddSpecialEffectTargetUnitBJ( "chest", GetLastCreatedUnit(), udg_MissileEffectString[ udg_Index ] )
						udg_MissileEffect[ udg_Index ] = GetLastCreatedEffectBJ();
						udg_MissileSize[ udg_Index ] = 100;
						SetUnitScalePercent( GetLastCreatedUnit(), udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ] )
						SetUnitVertexColorBJ( GetLastCreatedUnit(), 100, 100, 100, 0 )
						udg_TerrainReaction[ udg_Index ] = 0;
						udg_TreeReaction[ udg_Index ] = 2;
						udg_BoundaryReaction[ udg_Index ] = 2;
						udg_BuildingReaction[ udg_Index ] = 1;
						bj_forLoopAIndex = bj_forLoopAIndex + 1;

					}


					bj_forLoopAIndex = 1;
					bj_forLoopAIndexEnd = 7;

					while ( true ) {

						if ( bj_forLoopAIndex > bj_forLoopAIndexEnd ) break;
						TriggerExecute( gg_trg_Reset )
						udg_StartPoint[ udg_Index ] = OffsetLocation( udg_TempPoint, 1, 1 );
						udg_Angle[ udg_Index ] = ( GetUnitFacing( GetEnumUnit() ) + I2R( ( GetForLoopIndexA() * 52 ) ) );
						CreateNUnitsAtLoc( 1, FourCC( "h008" ), Player( PLAYER_NEUTRAL_AGGRESSIVE ), udg_StartPoint[ udg_Index ], udg_Angle[ udg_Index ] )
						UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetLastCreatedUnit() )
						udg_Missile[ udg_Index ] = GetLastCreatedUnit();
						udg_DamageSource[ udg_Index ] = GetEnumUnit();
						udg_Jump[ udg_Index ] = false;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func009C() ) ) {

							UnitAddAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )
							UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )

						} else {

						null

						}

						udg_Teleportation[ udg_Index ] = 0;
						udg_Distance[ udg_Index ] = 1000;
						udg_AttackType[ udg_Index ] = ATTACK_TYPE_CHAOS;
						udg_DamageMethod[ udg_Index ] = 1;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func014C() ) ) {

							udg_ExplodeRadius[ udg_Index ] = 175;

						} else {


							if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func014Func001C() ) ) {

								udg_ExplodeRadius[ udg_Index ] = 225;

							} else {

								udg_ExplodeRadius[ udg_Index ] = 125;

							}


						}

						udg_DamageSpecialEffect[ udg_Index ] = "";
						udg_DamageSpecialEffectLocation[ udg_LoopIndex ] = "origin";
						udg_CollisionRadius[ udg_Index ] = 85;
						udg_Damage[ udg_Index ] = 500;
						udg_Targets[ udg_Index ] = 1;
						udg_TargetsAdvanced[ udg_Index ] = 2;
						udg_Drag[ udg_Index ] = false;
						udg_Link[ udg_Index ] = false;
						udg_Lightning[ udg_Index ] = false;

						if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func007Func006Func024C() ) ) {

							AddLightningLoc( "DRAL", udg_StartPoint[ udg_Index ], udg_StartPoint[ udg_Index ] )
							udg_LightningEffect[ udg_Index ] = GetLastCreatedLightningBJ();

						} else {

						null

						}

						udg_Speed[ udg_Index ] = 1400;
						udg_Speed[ udg_Index ] = ( udg_Speed[ udg_Index ] * 0.03 );
						udg_VerticalArc[ udg_Index ] = 0;
						udg_HorizontalArc[ udg_Index ] = 0;
						udg_MissileEffectString[ udg_Index ] = "UI\\Menu\\UI_Human_AllyBack\\UI_Human_AllyBack.mdl";
						AddSpecialEffectTargetUnitBJ( "chest", GetLastCreatedUnit(), udg_MissileEffectString[ udg_Index ] )
						udg_MissileEffect[ udg_Index ] = GetLastCreatedEffectBJ();
						udg_MissileSize[ udg_Index ] = 100;
						SetUnitScalePercent( GetLastCreatedUnit(), udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ] )
						SetUnitVertexColorBJ( GetLastCreatedUnit(), 100, 100, 100, 0 )
						udg_TerrainReaction[ udg_Index ] = 0;
						udg_TreeReaction[ udg_Index ] = 2;
						udg_BoundaryReaction[ udg_Index ] = 2;
						udg_BuildingReaction[ udg_Index ] = 1;
						bj_forLoopAIndex = bj_forLoopAIndex + 1;

					}



				}


			} else {

				SetUnitManaBJ( GetEnumUnit(), ( GetUnitStateSwap( UNIT_STATE_MANA, GetEnumUnit() ) - 75 ) )
				bj_forLoopAIndex = 1;
				bj_forLoopAIndexEnd = 12;

				while ( true ) {

					if ( bj_forLoopAIndex > bj_forLoopAIndexEnd ) break;
					TriggerExecute( gg_trg_Reset )
					udg_StartPoint[ udg_Index ] = OffsetLocation( udg_TempPoint, 1, 1 );
					udg_Angle[ udg_Index ] = ( GetUnitFacing( GetEnumUnit() ) + I2R( ( GetForLoopIndexA() * 30 ) ) );
					CreateNUnitsAtLoc( 1, FourCC( "h008" ), Player( PLAYER_NEUTRAL_AGGRESSIVE ), udg_StartPoint[ udg_Index ], udg_Angle[ udg_Index ] )
					UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetLastCreatedUnit() )
					udg_Missile[ udg_Index ] = GetLastCreatedUnit();
					udg_DamageSource[ udg_Index ] = GetEnumUnit();
					udg_Jump[ udg_Index ] = false;

					if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func002Func009C() ) ) {

						UnitAddAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )
						UnitRemoveAbilityBJ( FourCC( "Amrf" ), GetTriggerUnit() )

					} else {

					null

					}

					udg_Teleportation[ udg_Index ] = 0;
					udg_Distance[ udg_Index ] = 1000;
					udg_AttackType[ udg_Index ] = ATTACK_TYPE_CHAOS;
					udg_DamageMethod[ udg_Index ] = 3;
					udg_ExplodeRadius[ udg_Index ] = 125;
					udg_DamageSpecialEffect[ udg_Index ] = "Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl";
					udg_DamageSpecialEffectLocation[ udg_LoopIndex ] = "origin";
					udg_CollisionRadius[ udg_Index ] = 100;
					udg_Damage[ udg_Index ] = 500;
					udg_Targets[ udg_Index ] = 1;
					udg_TargetsAdvanced[ udg_Index ] = 2;
					udg_Drag[ udg_Index ] = false;
					udg_Link[ udg_Index ] = false;
					udg_Lightning[ udg_Index ] = false;

					if ( ( Trig_Mass_Link_Func003Func001Func002Func002Func002Func024C() ) ) {

						AddLightningLoc( "DRAL", udg_StartPoint[ udg_Index ], udg_StartPoint[ udg_Index ] )
						udg_LightningEffect[ udg_Index ] = GetLastCreatedLightningBJ();

					} else {

					null

					}

					udg_Speed[ udg_Index ] = 1400;
					udg_Speed[ udg_Index ] = ( udg_Speed[ udg_Index ] * 0.03 );
					udg_VerticalArc[ udg_Index ] = 0;
					udg_HorizontalArc[ udg_Index ] = 0;
					udg_MissileEffectString[ udg_Index ] = "Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilMissile.mdl";
					AddSpecialEffectTargetUnitBJ( "chest", GetLastCreatedUnit(), udg_MissileEffectString[ udg_Index ] )
					udg_MissileEffect[ udg_Index ] = GetLastCreatedEffectBJ();
					udg_MissileSize[ udg_Index ] = 100;
					SetUnitScalePercent( GetLastCreatedUnit(), udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ], udg_MissileSize[ udg_Index ] )
					SetUnitVertexColorBJ( GetLastCreatedUnit(), 100, 100, 100, 0 )
					udg_TerrainReaction[ udg_Index ] = 0;
					udg_TreeReaction[ udg_Index ] = 2;
					udg_BoundaryReaction[ udg_Index ] = 2;
					udg_BuildingReaction[ udg_Index ] = 0;
					bj_forLoopAIndex = bj_forLoopAIndex + 1;

				}



			}

			DestroyGroup( udg_TempGroup2 )

		} else {

		null

		}

		RemoveLocation( udg_TempPoint )

	} else {

	null

	}


};


const Trig_Mass_Link_Actions = (): void => {

	udg_TempGroup = GetUnitsOfTypeIdAll( FourCC( "E005" ) );
	ForGroupBJ( udg_TempGroup, Trig_Mass_Link_Func003A )
	DestroyGroup( udg_TempGroup )

};


//===========================================================================
const InitTrig_Mass_Link = (): void => {

	gg_trg_Mass_Link = CreateTrigger();
	DisableTrigger( gg_trg_Mass_Link )
	TriggerRegisterTimerEventPeriodic( gg_trg_Mass_Link, 1 )
	TriggerAddAction( gg_trg_Mass_Link, Trig_Mass_Link_Actions )

};


addScriptHook( W3TS_HOOK.MAIN_AFTER, (): void => {

  InitTrig_Mass_Link();

} );
